/* =========================================================
   style.css  ― フラット&クリーン版（2025-10）
   テーマ色: #00abae（テックアイエス）
   Keep/Calendar: #4587F7
   ======================================================= */

* { box-sizing: border-box; }
html, body { margin:0; padding:0; }
button, input, select, textarea { font:inherit; }

:root{
  --brand:#00abae;
  --brand-600:#009399;

  --ink:#24313d;
  --muted:#6f7e8a;

  --bg:#f5f8f7;
  --card:#ffffff;
  --line:#e7ecef;

  --chip-kigyou:#9fdfd9; /* 参考色（未使用） */
  --chip-mikomi:#fff3cd;
  --chip-botsu:#dee2e6;

  --danger:#e74c3c;

  --app:#4587F7;
  --app-600:#2f73f5;
}

body{
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP",
               "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  color: var(--ink);
  line-height: 1.6;
  background:
    linear-gradient(var(--brand) 3px, transparent 3px) no-repeat fixed,
    var(--bg);
}

.container{ max-width: 1200px; margin:0 auto; padding:24px 16px 48px; }
h1{ margin:0 0 12px; font-size:26px; font-weight:800; letter-spacing:.02em; }
h2{ margin:6px 0 10px; font-size:18px; font-weight:700; }

.primary-btn,.secondary-btn,.danger-btn,.link-btn{
  display:inline-flex; align-items:center; justify-content:center; gap:6px;
  padding:10px 14px; border-radius:10px; border:1px solid transparent;
  cursor:pointer; text-decoration:none; user-select:none;
  transition: background-color .15s ease, border-color .15s ease, transform .02s ease;
}

.primary-btn{ background:var(--brand); color:#fff; border-color:var(--brand); }
.primary-btn:hover{ background:var(--brand-600); border-color:var(--brand-600); }
.primary-btn:active{ transform:translateY(1px); }

.secondary-btn{ background:#f1f5f7; color:var(--ink); border-color:#e3e8ec; }
.secondary-btn:hover{ background:#eaf0f3; border-color:#dfe6ea; }
.secondary-btn:active{ transform:translateY(1px); }

.danger-btn{ background:var(--danger); color:#fff; border-color:var(--danger); }
.danger-btn:hover{ background:#cf4134; border-color:#cf4134; }
.danger-btn:active{ transform:translateY(1px); }

.link-btn{ padding:10px 14px; border-radius:12px; }

.app-btn{ background:var(--app); color:#fff !important; border:1px solid var(--app); }
.app-btn:hover{ background:var(--app-600); border-color:var(--app-600); }

.tab-nav{
  position:relative; display:flex; gap:12px;
  border-bottom:1px solid var(--line);
  padding:6px 0; margin-bottom:12px;
  padding-right:320px;
}
.tab-btn{
  background:transparent; border:0; padding:10px 12px; font-weight:700;
  color:var(--muted); cursor:pointer; border-bottom:3px solid transparent;
}
.tab-btn:hover{ color:var(--ink); }
.tab-btn.active{ color:var(--brand); border-color:var(--brand); }

.top-right-links{
  position:absolute; right:0; top:50%; transform:translateY(-50%);
  display:none; gap:10px;
}

.page-content{ display:none; }
.page-content.active{ display:block; }

#page-history.page-content.active{
  display:grid; grid-template-columns:3fr 7fr; gap:16px; align-items:start;
}
#page-history.page-content:not(.active){ display:none !important; }

.form-container,
.filter-panel,
.memo-panel,
.history-log{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px 12px;
  box-shadow:0 1px 4px rgba(0,0,0,.03);
}
.form-container form{ display:grid; grid-template-columns:1fr; gap:10px; }

input[type="text"], input[type="month"], select, textarea{
  width:100%; padding:10px 12px; border-radius:10px;
  border:1px solid #d8e0e6; background:#fff; outline:none;
}
input:focus, select:focus, textarea:focus{
  border-color:var(--brand);
  box-shadow:0 0 0 3px rgba(0,171,174,.12);
}

.search-container{ display:grid; grid-template-columns:320px 1fr; gap:16px; margin:10px 0 12px; }
.search-container.simple{ display:block; }

.search-container.hl-layout{
  display:grid;
  grid-template-columns: minmax(520px, 1.2fr) minmax(420px, 1fr);
  gap:18px; align-items:start; margin:8px 0 10px;
}

.filter-row{
  display:grid; grid-template-columns:1fr 1fr auto; align-items:end; gap:12px; margin-bottom:10px;
}
.filter-cell{ display:flex; flex-direction:column; gap:6px; }
.clear-right{ align-self:end; height:38px; padding:8px 16px; }

.memo-panel textarea{ min-height:220px; }
.memo-actions{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:10px; }
.memo-status{ color:var(--muted); font-size:12px; }
.memo-actions-right{ display:inline-flex; gap:8px; }
.memo-hint{ color:var(--muted); }

.history-log-wrapper{ display:flex; flex-direction:column; gap:6px; }

.history-log.scrollbox{ overflow:auto; max-height: calc(100vh - 340px); min-height:280px; }
#page-history-list .history-log.scrollbox{
  height: calc(100vh - 300px);
  min-height:260px;
}

table{ width:100%; border-collapse:collapse; font-size:14px; }
thead th{
  position:sticky; top:0; z-index:2; text-align:left;
  background:#f3f7f8; color:#425260;
  border-bottom:1px solid var(--line); padding:10px 12px;
}
tbody td{
  border-bottom:1px solid #eef2f5; padding:12px; vertical-align:top;
}
tbody tr{ background:#fff; transition:background-color .12s ease; }
tbody tr:nth-child(even){ background:#fbfcfd; }
tbody tr:hover{ background:#f2f7f8; }
tbody tr[role="button"]{ cursor:pointer; }

td input, td textarea {
  width: 100%;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* ステータス色分け（企業=ブランド色で強調） */
.status-kigyou td{ background: var(--brand) !important; color:#fff !important; }
.status-kigyou td a{ color:#fff; text-decoration: underline; }
.status-mikomi td{ background: var(--chip-mikomi) !important; }
.status-botsu  td{ background: var(--chip-botsu)  !important; }

.color-chip{ display:inline-block; padding:2px 8px; border-radius:8px;
  border:1px solid rgba(0,0,0,.06); font-size:12px; }
.color-chip.kigyou{ background:var(--chip-kigyou); }
.color-chip.mikomi{ background:var(--chip-mikomi); }
.color-chip.botsu { background:var(--chip-botsu); }

.data-io-buttons{ margin-top:10px; display:flex; flex-wrap:wrap; gap:10px; }

/* ---- Note 折りたたみ（背景を塗らず“文字だけ”フェード） --------- */
.note-cell[data-collapsed="1"]{
  max-height: 3.6em; /* 約2行分 */ overflow: hidden; position: relative;
}
.note-cell[data-collapsed="1"]::after{
  content: ""; position: absolute; left:0; right:0; bottom:0; height:1.6em;
  background: inherit;
  -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0), #000);
  mask-image: linear-gradient(to bottom, rgba(0,0,0,0), #000);
  pointer-events: none;
}
@supports not (mask-image: linear-gradient(#000,#000)){
  .note-cell[data-collapsed="1"]::after{ background: transparent; }
}

/* Modal */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; z-index:50; }
.modal.active{ display:flex; }
.modal-content{
  width:min(680px,92vw); background:#fff; border-radius:16px; padding:18px;
  position:relative; box-shadow:0 16px 48px rgba(0,0,0,.18);
  border:1px solid var(--line);
}
.modal-content h2{ margin:0 0 10px; }
.modal-content form{ display:grid; grid-template-columns:1fr; gap:10px; }
.modal-content label{ font-weight:700; }
.close-btn{
  position:absolute; top:8px; right:10px; width:34px; height:34px; border-radius:50%;
  border:1px solid #e3e8ec; background:#f6f8f9; color:#3c4b59; font-size:20px; cursor:pointer;
}
.close-btn:hover{ background:#eef3f6; }
.modal-actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:6px; }

/* Responsive */
@media (max-width: 980px){
  #page-history.page-content.active{ display:block; }
  .search-container{ grid-template-columns:1fr; }
  .search-container.hl-layout{ grid-template-columns:1fr; }
  .filter-row{ grid-template-columns:1fr; }
  .clear-right{ width:100%; }
  .top-right-links{ position:static; transform:none; margin:8px 0 0 auto; }
}
